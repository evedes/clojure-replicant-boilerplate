{"version":3,"sources":["portfolio/ui/canvas/background.cljs"],"mappings":"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","names":["portfolio.ui.canvas.background/default-options","p__51120","map__51126","cljs.core/--destructure-map","cljs.core.get","portfolio.ui.canvas.background/prepare-canvas","data","el","background-color","body-class","document-class","document-data","portfolio.ui.components.canvas/get-iframe","body","portfolio.ui.components.canvas/get-iframe-body","seq__51141","cljs.core/seq","chunk__51142","count__51143","i__51144","map__51279","temp__5823__auto__","cljs.core/chunked-seq?","c__5525__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","map__51386","cljs.core/first","cljs.core/next","value","cljs.core/empty?","cljs.core._EQ_","seq__51285","chunk__51286","count__51287","i__51288","vec__51298","cljs.core.nth","vec__51312","seq__51389","chunk__51391","count__51392","i__51393","vec__51412","vec__51424","k","v","cljs.core/name","seq__51315","chunk__51316","count__51317","i__51318","vec__51335","vec__51347","seq__51431","chunk__51432","count__51433","i__51434","vec__51444","vec__51451","cljs.core.apply","cljs.core/dissoc","cljs.core/keys","portfolio.ui.canvas.background/create-background-tool","config","options","or__5002__auto__","portfolio.ui.canvas.addons/create-toolbar-menu-button","cljs.core/hash","phosphor.icons/load-icon!","id","cljs.core.filter","cljs.core.comp"],"sourcesContent":["(ns portfolio.ui.canvas.background\n  (:require [phosphor.icons :as icons]\n            [portfolio.ui.canvas.addons :as addons]\n            [portfolio.ui.components.canvas :as canvas]))\n\n(def default-options\n  [{:id :light-mode\n    :title \"Light (.light-mode)\"\n    :value {:background/background-color \"#fff\"\n            :background/document-class \"light-mode\"\n            :background/body-class \"light-mode\"}}\n   {:id :dark-mode\n    :title \"Dark (.dark-mode)\"\n    :value {:background/background-color \"#111111\"\n            :background/document-class \"dark-mode\"\n            :background/body-class \"dark-mode\"}}])\n\n(defn prepare-canvas [data el {:background/keys [background-color body-class document-class document-data]}]\n  (set! (.. (canvas/get-iframe el) -style -backgroundColor) background-color)\n  (let [body (canvas/get-iframe-body el)]\n    (doseq [{:keys [value]} (:options data)]\n      (when-not (empty? (:background/body-class value))\n        (if (= body-class (:background/body-class value))\n          (.add (.-classList body) (:background/body-class value))\n          (.remove (.-classList body) (:background/body-class value))))\n      (when-not (empty? (:background/document-class value))\n        (if (= document-class (:background/document-class value))\n          (.add (.-classList (.-parentNode body)) (:background/document-class value))\n          (.remove (.-classList (.-parentNode body)) (:background/document-class value))))\n      (if (= (:background/document-data value) document-data)\n        (doseq [[k v] (:background/document-data value)]\n          (.setAttribute (.-parentNode body) (str \"data-\" (name k)) (str v)))\n        (doseq [[k v] (apply dissoc (:background/document-data value) (keys document-data))]\n          (.removeAttribute (.-parentNode body) (str \"data-\" (name k))))))))\n\n(defn create-background-tool [config]\n  (let [options (or (:background/options config) default-options)]\n    (addons/create-toolbar-menu-button\n     {:id :canvas/background\n      :persist? true\n      :persist-key (hash [(:background/options config) (:background/default-option-id config)])\n      :title \"Background\"\n      :icon (icons/icon :phosphor.regular/palette)\n      :options (or (:background/options config) options)\n      :default-value (->> (or (when-let [id (:background/default-option-id config)]\n                                (filter (comp #{id} :id) options))\n                              options)\n                          first\n                          :value)\n      :prepare-canvas #'prepare-canvas})))\n"],"x_google_ignoreList":[0]}